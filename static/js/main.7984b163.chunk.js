(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{288:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(60),i=a.n(r),o=a(20),u=a(24),l=(a(306),a(1)),s=a.n(l),m=a(6),d=a(27),f=a(22),h=a(28),p=a.n(h),v="https://final-api-backend.herokuapp.com/",b=function(e,t){return function(){return f.sessionService.loadSession().then(function(a){var n=a.token,c=e.getDate(),r=e.getMonth()+1,i=e.getFullYear(),o="".concat(i,"-").concat(r<10?"0".concat(r):r,"-").concat(c<10?"0".concat(c):c);p()({method:"post",url:"".concat(v,"/activs"),headers:{Authorization:"Bearer ".concat(n)},data:{data:{attributes:{item:o}}}}).then(function(e){var a=e.data.data.id;t.push("/activ/".concat(a))}).catch(function(){p()({method:"get",url:"".concat(v,"/activs"),headers:{Authorization:"Bearer ".concat(n)},data:{data:{attributes:{item:o}}}}).then(function(e){var a=e.data.data.find(function(e){return e.attributes.item===o});a?t.push("/activ/".concat(a.id)):t.push("/not-found")}).catch(function(){t.push("/not-found")})})}).catch(function(){t.push("signin")})}},g=(s.a.shape,s.a.func,Object(u.b)(null,function(e){return{openActivItem:function(t,a){return e(b(t,a))}}})(Object(m.g)(function(e){var t=e.history,a=e.openActivItem;return Object(n.useEffect)(function(){var e=!0;if(e){var n=new Date(Date.now());a(n,t)}return function(){return e=!1}},[]),c.a.createElement("div",null)}))),E=a(11),N=(s.a.bool,s.a.string,s.a.func,function(e){var t=e.name,a=e.type,n=e.handleChange,r=e.value,i=e.placeholder,o=e.id,u=e.required;return c.a.createElement("div",null,c.a.createElement("label",{htmlFor:o},t),c.a.createElement("input",{name:t,type:a,value:r,onChange:n,placeholder:i,id:o,required:u}))}),O=(a(334),function(e){var t=e.children;return c.a.createElement("button",{className:"btn-login",type:"submit"},t)}),k=(a(336),Object(u.b)(null,function(e){return{login:function(t,a,n){return e(function(e,t,a){return function(){return p()({method:"post",url:"".concat(v,"/login"),data:{data:{attributes:{username:e,password:t}}}}).then(function(e){var t=e.data,n=t.data.relationships.user.meta.username,c=t.data.attributes.token;f.sessionService.saveSession({token:c}).then(function(){f.sessionService.saveUser({username:n}).then(function(){a.push("/")})})}).catch(function(){a.push("/signin")})}}(t,a,n))}}})(Object(m.g)(function(e){var t=e.history,a=e.login,r=Object(n.useState)(""),i=Object(E.a)(r,2),u=i[0],l=i[1],s=Object(n.useState)(""),m=Object(E.a)(s,2),d=m[0],f=m[1];return c.a.createElement("div",{className:"login-page"},c.a.createElement("div",{className:"login"},c.a.createElement("span",{className:"text-login"},"Log in"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(u,d,t)}},c.a.createElement(N,{name:"Username:",type:"username",handleChange:function(e){var t=e.target.value;l(t)},value:u,placeholder:"username",required:!0}),c.a.createElement(N,{name:"Password:",type:"password",value:d,handleChange:function(e){var t=e.target.value;f(t)},placeholder:"password",required:!0}),c.a.createElement("div",null,c.a.createElement("div",{className:""},c.a.createElement(O,null," Log in ")),c.a.createElement("span",{className:"text-signup"},"New user?"),c.a.createElement("div",{className:"btn-signup"},c.a.createElement(o.b,{to:"signup"},"Sign up"))))))}))),j=(a(339),Object(m.g)(function(e){var t=e.history,a=Object(n.useState)(""),r=Object(E.a)(a,2),i=r[0],u=r[1],l=Object(n.useState)(""),s=Object(E.a)(l,2),m=s[0],d=s[1],f=Object(n.useState)(""),h=Object(E.a)(f,2),b=h[0],g=h[1],k=Object(n.useState)(!1),j=Object(E.a)(k,2),y=j[0],S=j[1];return c.a.createElement("div",{className:"signup-page"},c.a.createElement("div",{className:"signup"},c.a.createElement("h2",null,"New account"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m===b&&(S(!1),p()({method:"post",url:"".concat(v,"/sign_up"),data:{data:{attributes:{username:i,password:m}}}}).then(function(){t.push("/signin")}).catch(function(){S(!0)}))}},c.a.createElement(N,{name:"Username: ",type:"username",handleChange:function(e){var t=e.target.value;u(t)},value:i,placeholder:"Username"}),c.a.createElement(N,{name:"Password: ",type:"password",value:m,handleChange:function(e){var t=e.target.value;d(t)},placeholder:"Password"}),c.a.createElement(N,{name:"ConfirmPassword: ",type:"password",handleChange:function(e){var t=e.target.value;g(t)},value:b,placeholder:"Confirm password"}),"(",y&&c.a.createElement("div",null,c.a.createElement("ul",{className:"errors"},c.a.createElement("li",null,"Username can`t be blank"),c.a.createElement("li",null,"Password can`t be blank"),c.a.createElement("li",null,"ConfirmPassword can`t be blank"))),")",c.a.createElement("div",null,c.a.createElement(O,null," Sign up ")),c.a.createElement("span",{className:"text"},"Already registered?"),c.a.createElement("div",{className:"text-login"},c.a.createElement(o.b,{to:"signin"},"Log in")))))})),y=(a(342),function(){return c.a.createElement("div",{className:"not-found"},c.a.createElement("div",{className:"nf-title"},"404"),c.a.createElement("div",{className:"nf-text"},"Page is not found"),c.a.createElement(o.b,{className:"nf-link",to:"/"},"To Homepage"))}),S=(a(344),function(e){return e.session}),_=Object(d.a)([S],function(e){return e.user}),C=Object(d.a)([S],function(e){return e.authenticated}),w=Object(d.a)([S],function(e){return e.checked}),x=function(e){var t=e.authenticated,a=e.logout,r=e.history,i=e.user.username,u=Object(n.useState)(!0),l=Object(E.a)(u,2),s=l[0],m=l[1];return c.a.createElement("div",null,c.a.createElement("header",{className:"header"},c.a.createElement(o.b,{className:"logo-title",to:"/"},"Tracking App"),c.a.createElement("div",{className:""},t?c.a.createElement("div",{className:""},c.a.createElement("nav",{className:""},c.a.createElement(o.b,{className:"add-item",to:"/activitem"},"+")),c.a.createElement("div",{className:"user-profile"},i),c.a.createElement("div",{className:"logged-user-name"},c.a.createElement("div",{onClick:function(){return a(r)},onKeyPress:function(){},role:"button",tabIndex:0},c.a.createElement("i",{className:"fa fa-sign-out fa-2x","aria-hidden":"true"})))):c.a.createElement(o.b,{className:"logged-item",to:"/signin"},"Log in1"),c.a.createElement("div",{className:"",onClick:function(){return m(function(e){return!e})},onKeyPress:function(){},role:"button",tabIndex:0},c.a.createElement("span",{className:""},"\xa0")))),c.a.createElement("nav",{className:"logged ".concat(s?"hidden":"")},c.a.createElement(o.b,{className:"logged-item",to:"/activitem"},"Choose day"),t?c.a.createElement("div",{className:"logged-item",onClick:function(){return a(r)},onKeyPress:function(){},role:"button",tabIndex:0},c.a.createElement("i",{className:"fa fa-sign-out","aria-hidden":"true"})):c.a.createElement(o.b,{className:"logged-item",to:"/signin"},"Log in")))};x.defaultProps={user:{username:""}};s.a.bool,s.a.func,s.a.shape,s.a.string;var D=Object(d.b)({authenticated:C,user:_}),T=Object(u.b)(D,function(e){return{logout:function(t){return e(function(e){return function(){return f.sessionService.loadSession().then(function(t){var a=t.token;p()({method:"delete",url:"".concat(v,"/logout"),headers:{Authorization:"Bearer ".concat(a)}}).then(function(){f.sessionService.deleteSession().then(function(){f.sessionService.deleteUser(),e.push("/")})}).catch(function(){e.push("/not-found")})}).catch(function(){e.push("/signin")})}}(t))}}})(Object(m.g)(x)),A=(a(347),function(){return c.a.createElement("footer",{className:"footer"})}),I=a(287),P=(a(349),a(351),s.a.shape,s.a.func,Object(u.b)(null,function(e){return{openActivItem:function(t,a){return e(b(t,a))}}})(Object(m.g)(function(e){var t=e.history,a=e.openActivItem;return c.a.createElement("div",{className:"calendar"},c.a.createElement(I.a,{onClickDay:function(e){a(e,t)},display:"center"}))}))),K=(s.a.string,s.a.func,function(e){var t=e.id,a=e.componentClassName,n=e.handleChange,r=e.value,i=e.label;return c.a.createElement("div",{className:"form-text"},c.a.createElement("div",{className:"".concat(a,"__form-text__control")},c.a.createElement("label",{htmlFor:t,className:"".concat(a,"__form-text__label")},i),c.a.createElement("input",{id:t,className:"".concat(a,"__form-text__input"),name:"Name: ",type:"text",onChange:n,value:r,placeholder:"Name",required:!0}),c.a.createElement("div",{className:"".concat(a,"__form-text__bar")})))}),Z=(s.a.string,s.a.func,function(e){var t=e.id,a=e.handleChange,n=e.value,r=e.increment,i=e.decrement,o=e.label;return c.a.createElement("div",{className:"number-form"},c.a.createElement("label",{htmlFor:t},o),c.a.createElement("span",{onClick:i,onKeyPress:i,role:"link",tabIndex:0,className:"number-form__decrement"},"-"),c.a.createElement("input",{id:t,type:"string",onChange:a,value:n,required:!0}),c.a.createElement("span",{onClick:r,onKeyPress:r,role:"link",tabIndex:0,className:"number-form__increment"},"+"))}),z=(a(353),Object(m.g)(function(e){var t=e.match.params.activId,a=e.history,r=e.setRefresh,i=Object(n.useState)(""),o=Object(E.a)(i,2),u=o[0],l=o[1],s=Object(n.useState)(0),m=Object(E.a)(s,2),d=m[0],h=m[1],b=Object(n.useState)(0),g=Object(E.a)(b,2),N=g[0],O=g[1],k=Object(n.useState)(0),j=Object(E.a)(k,2),y=j[0],S=j[1];return c.a.createElement("div",{className:"add-track"},c.a.createElement("h4",null,"Add Track"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f.sessionService.loadSession().then(function(e){var n=e.token;p()({method:"post",url:"".concat(v,"/activs/").concat(t,"/tracks"),headers:{Authorization:"Bearer ".concat(n)},data:{data:{attributes:{name:u,distance:d,duration:N,repeat:y}}}}).then(function(){l(""),h(1),O(1),S(1),r(1+99*Math.random())}).catch(function(){a.push("/not-found")})}).catch(function(){a.push("sign-in")})},className:"activ-form"},c.a.createElement(K,{label:"Name: ",id:"name",handleChange:function(e){var t=e.target.value;return l(t)},value:u}),c.a.createElement(Z,{id:"distance",handleChange:function(e){var t=e.target.value;return h(t)},value:d,increment:function(){h(function(e){return e+100})},decrement:function(){h(function(e){return e-100})},label:"Distance  (meters): "}),c.a.createElement(Z,{id:"duration",handleChange:function(e){var t=e.target.value;return O(t)},value:N,increment:function(){O(function(e){return e+3})},decrement:function(){O(function(e){return e-3})},label:"Duration(minutes): "}),c.a.createElement(Z,{id:"repeat",handleChange:function(e){var t=e.target.value;return S(t)},value:y,increment:function(){S(function(e){return e+1})},decrement:function(){S(function(e){return e-1})},label:"Repeats (times): "}),c.a.createElement("input",{className:"submit-btn",type:"submit"})))})),B=(a(356),{ADD_TRACKS:"ADD_TRACKS"}),R=(s.a.string,s.a.number,s.a.func,s.a.arrayOf,s.a.shape,Object(u.b)(null,function(e){return{addTracks:function(t){return e(function(e){return{type:B.ADD_TRACKS,payload:e}}(t))}}})(Object(m.g)(function(e){var t=e.tracks,a=e.addTracks,n=e.history;return c.a.createElement("div",{className:"tracks-list"},c.a.createElement("h3",null,"Track`s list"),t.map(function(e){var t=e.id,r=e.attributes,i=r.name,o=r.distance,u=r.duration,l=r.repeat;return c.a.createElement("div",{className:"track",onClick:function(){return function(e){f.sessionService.loadSession().then(function(t){var c=t.token;p()({method:"get",url:"".concat(v,"/progress/").concat(e),headers:{Authorization:"Bearer ".concat(c)}}).then(function(e){var t=e.data.data;a(t),n.push("/progress")}).catch(function(){n.push("/not-found")})}).catch(function(){n.push("/signin")})}(i)},onKeyPress:function(){},role:"link",tabIndex:0,key:t},c.a.createElement("div",{className:"one-train"},c.a.createElement("small",null,"Exercize:")," ".concat(i)),c.a.createElement("div",null,c.a.createElement("small",null,"Distance:")," ".concat(o," meters")),c.a.createElement("div",null,c.a.createElement("small",null,"".concat(l,"repeats with ").concat(u," min. each time"))))}))}))),q=(a(358),Object(m.g)(function(e){var t=e.match.params.activId,a=e.history,r=Object(n.useState)(" "),i=Object(E.a)(r,2),o=i[0],u=i[1],l=Object(n.useState)([]),s=Object(E.a)(l,2),m=s[0],d=s[1],h=Object(n.useState)(1+99*Math.random()),b=Object(E.a)(h,2),g=b[0],N=b[1];return Object(n.useEffect)(function(){var e=!0;return f.sessionService.loadSession().then(function(n){var c=n.token;p()({method:"get",url:"".concat(v,"/activs/").concat(t,"/tracks"),headers:{Authorization:"Bearer ".concat(c)}}).then(function(n){var r=n.data.data;e&&(p()({method:"get",url:"".concat(v,"/activs/").concat(t),headers:{Authorization:"Bearer ".concat(c)}}).then(function(e){var t=e.data.data.attributes.item;u(new Date("".concat(t,"T00:00:00")).toDateString())}).catch(function(){return a.push("/not-found")}),d(r))}).catch(function(){e&&a.push("/not-found")})}).catch(function(){e&&a.push("/login")}),function(){return e=!1}},[g]),c.a.createElement("div",{className:"activ"},c.a.createElement(z,{setRefresh:N}),c.a.createElement("h5",{className:"track-date"},"Track`s date --",o),c.a.createElement(R,{tracks:m}))})),U=a(390),F=a(395),L=a(248),M=a(249),J=a(291),H=a(120),Y=a(290),G=Object(d.a)([function(e){return e.track}],function(e){return e.tracks}),Q=Object(d.a)([G],function(e){return function(e){return e.map(function(e){var t=e.attributes,a=t.distance,n=t.duration;return{item:t.activ.item,distance:a,duration:n}})}(e)}),V=Object(d.a)([G],function(e){return e[0]}),W=(a(361),s.a.string,s.a.number,s.a.arrayOf,s.a.shape,Object(d.b)({tracks:Q,track:V})),X=Object(u.b)(W,null)(function(e){var t=e.tracks,a=e.track.attributes.name;return c.a.createElement("div",{className:"progress-page"},c.a.createElement("h2",{className:"progress-page-title"},c.a.createElement("span",null," Diagram for: "),a),c.a.createElement(U.a,{width:300,height:200,data:t,margin:{top:5,right:30,left:20,bottom:5}},c.a.createElement(F.a,{strokeDasharray:"3 3"}),c.a.createElement(L.a,{dataKey:"item"}),c.a.createElement(M.a,null),c.a.createElement(J.a,null),c.a.createElement(H.a,null),c.a.createElement(Y.a,{dataKey:"distance",fill:"#8fe18b"})),c.a.createElement(U.a,{width:300,height:200,data:t,margin:{top:5,right:30,left:20,bottom:5}},c.a.createElement(F.a,{strokeDasharray:"3 3"}),c.a.createElement(L.a,{dataKey:"item"}),c.a.createElement(M.a,null),c.a.createElement(J.a,null),c.a.createElement(H.a,null),c.a.createElement(Y.a,{dataKey:"duration",fill:"#f22527"})))}),$=function(e){var t=e.component,a=e.exact,n=void 0!==a&&a,r=e.path,i=e.authenticated;return c.a.createElement(m.b,{exact:n,path:r,render:function(e){return i?c.a.createElement(t,e):c.a.createElement(m.a,{to:{pathname:"/signin",state:{from:e.location}}})}})};s.a.object,s.a.bool,s.a.string,s.a.func,s.a.oneOfType;$.defaultProps={exact:!1,location:{}};var ee=$,te=(s.a.bool,Object(d.b)({authenticated:C,checked:w})),ae=Object(u.b)(te,null)(function(e){var t=e.authenticated,a=e.checked;return c.a.createElement("div",{className:"app"},c.a.createElement(T,null),a&&c.a.createElement(m.d,null,c.a.createElement(ee,{exact:!0,path:"/",component:g,authenticated:t}),c.a.createElement(ee,{path:"/activItem",component:P,authenticated:t}),c.a.createElement(ee,{path:"/progress",component:X,authenticated:t}),c.a.createElement(ee,{path:"/activ/:activId",component:q,authenticated:t}),c.a.createElement(m.b,{path:"/signin",component:k}),c.a.createElement(m.b,{path:"/signup",component:j}),c.a.createElement(m.b,{path:"/*",component:y})),c.a.createElement(A,null))}),ne=a(71),ce=a(138),re=a.n(ce),ie=a(139),oe=a(292),ue={tracks:[{id:"1",type:"track",attributes:{name:"Fitness",distance:500,duration:30,repeat:5,activ:{id:1,user_id:1,item:"2021-06-23",created_at:"2021-06-23T17:37:54.964Z",updated_at:"2021-06-23T17:37:54.964Z"}}},{id:"2",type:"track",attributes:{name:"Cycling",distance:3e5,duration:320,repeat:2,activ:{id:1,user_id:1,item:"2021-06-23",created_at:"2021-06-23T17:37:54.964Z",updated_at:"2021-06-23T17:37:54.964Z"}}},{id:"3",type:"track",attributes:{name:"Cyclinging",distance:3e4,duration:120,repeat:1,activ:{id:1,user_id:1,item:"2021-06-23",created_at:"2021-06-23T17:37:54.964Z",updated_at:"2021-06-23T17:37:54.964Z"}}},{id:"4",type:"track",attributes:{name:"Jogging",distance:1e4,duration:75,repeat:1,activ:{id:1,user_id:1,item:"2021-06-23",created_at:"2021-06-23T17:37:54.964Z",updated_at:"2021-06-23T17:37:54.964Z"}}},{id:"5",type:"track",attributes:{name:"Swimming",distance:3e3,duration:150,repeat:1,activ:{id:1,user_id:1,item:"2021-06-23",created_at:"2021-06-23T17:37:54.964Z",updated_at:"2021-06-23T17:37:54.964Z"}}}]},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.ADD_TRACKS:return Object(oe.a)({},e,{tracks:t.payload});default:return e}},se=Object(ne.b)({track:le,session:f.sessionReducer}),me=[re.a,ie.a],de=Object(ne.c)(se,ne.a.apply(void 0,me));f.sessionService.initSessionService(de);var fe=de;i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(u.a,{store:fe},c.a.createElement(o.a,null,c.a.createElement(ae,null)))),document.getElementById("root"))},296:function(e,t,a){e.exports=a(288)},306:function(e,t,a){},334:function(e,t,a){},336:function(e,t,a){},339:function(e,t,a){},342:function(e,t,a){},344:function(e,t,a){},347:function(e,t,a){},351:function(e,t,a){},353:function(e,t,a){},356:function(e,t,a){},358:function(e,t,a){},361:function(e,t,a){}},[[296,2,1]]]);
//# sourceMappingURL=main.7984b163.chunk.js.map